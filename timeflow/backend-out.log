
> timeflow@0.1.0 dev:backend C:\Users\theth\Desktop\Productivity Pro\timeflow
> pnpm -C apps/backend dev


> @timeflow/backend@0.1.0 dev C:\Users\theth\Desktop\Productivity Pro\timeflow\apps\backend
> tsx watch src/index.ts

{"level":30,"time":1766562020921,"pid":2028,"hostname":"DESKTOP-D5OSSQL","msg":"Server listening at http://127.0.0.1:3001"}
{"level":30,"time":1766562020921,"pid":2028,"hostname":"DESKTOP-D5OSSQL","msg":"Server listening at http://10.5.0.2:3001"}
{"level":30,"time":1766562020921,"pid":2028,"hostname":"DESKTOP-D5OSSQL","msg":"Server listening at http://172.20.16.1:3001"}
{"level":30,"time":1766562020921,"pid":2028,"hostname":"DESKTOP-D5OSSQL","msg":"Server listening at http://192.168.1.9:3001"}
{"level":30,"time":1766562020921,"pid":2028,"hostname":"DESKTOP-D5OSSQL","msg":"TimeFlow backend listening at http://127.0.0.1:3001"}
{"level":30,"time":1766562034064,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-1","req":{"method":"GET","url":"/health","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56499},"msg":"incoming request"}
{"level":30,"time":1766562034069,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-1","res":{"statusCode":200},"responseTime":3.8619000017642975,"msg":"request completed"}
{"level":30,"time":1766562039030,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-2","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'conversation',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 1392,
  temperature: 0.7,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 674 chars
[AssistantService][Debug] No structured JSON payload found in response.
[AssistantService][Debug] Mode: conversation, Mascot: default, Preview: NO
{"level":30,"time":1766562041975,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-2","res":{"statusCode":200},"responseTime":2945.197300001979,"msg":"request completed"}
{"level":30,"time":1766562043482,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-3","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 2471,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 1939 chars
[AssistantService][Debug] Validation: FAILED (errors=2, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562053209,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-3","res":{"statusCode":200},"responseTime":9726.581000000238,"msg":"request completed"}
{"level":30,"time":1766562054720,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-4","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT 1
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
{"level":30,"time":1766562055038,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-4","res":{"statusCode":200},"responseTime":317.6251000016928,"msg":"request completed"}
{"level":30,"time":1766562056552,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-5","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 2508,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 2219 chars
[AssistantService][Debug] Validation: FAILED (errors=2, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562067598,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-5","res":{"statusCode":200},"responseTime":11045.56970000267,"msg":"request completed"}
{"level":30,"time":1766562069113,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-6","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 2459,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 2011 chars
[AssistantService][Debug] Validation: FAILED (errors=2, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562077772,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-6","res":{"statusCode":200},"responseTime":8658.594899997115,"msg":"request completed"}
{"level":30,"time":1766562079287,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-7","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT 1
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 2468,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 1996 chars
[AssistantService][Debug] Validation: FAILED (errors=2, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562092248,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-7","res":{"statusCode":200},"responseTime":12960.774100005627,"msg":"request completed"}
{"level":30,"time":1766562093766,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-8","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 2491,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 2276 chars
[AssistantService][Debug] Validation: FAILED (errors=2, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562102047,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-8","res":{"statusCode":200},"responseTime":8281.107100009918,"msg":"request completed"}
{"level":30,"time":1766562103561,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-9","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT 1
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'conversation',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 1389,
  temperature: 0.7,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 345 chars
[AssistantService][Debug] No structured JSON payload found in response.
[AssistantService][Debug] Mode: conversation, Mascot: default, Preview: NO
{"level":30,"time":1766562105833,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-9","res":{"statusCode":200},"responseTime":2271.549900010228,"msg":"request completed"}
{"level":30,"time":1766562107344,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-a","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 2478,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 1492 chars
[AssistantService][Debug] Validation: FAILED (errors=2, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562112703,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-a","res":{"statusCode":200},"responseTime":5359.482000008225,"msg":"request completed"}
{"level":30,"time":1766562114208,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-b","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 2479,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 1498 chars
[AssistantService][Debug] Validation: FAILED (errors=1, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562119309,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-b","res":{"statusCode":200},"responseTime":5100.276099994779,"msg":"request completed"}
{"level":30,"time":1766562120814,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-c","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT 1
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 2488,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 2265 chars
[AssistantService][Debug] Validation: FAILED (errors=2, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562128890,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-c","res":{"statusCode":200},"responseTime":8075.912299990654,"msg":"request completed"}
{"level":30,"time":1766562130405,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-d","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 2481,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 1895 chars
[AssistantService][Debug] Validation: FAILED (errors=2, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562137898,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-d","res":{"statusCode":200},"responseTime":7492.85909999907,"msg":"request completed"}
{"level":30,"time":1766562139412,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-e","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT 1
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 2478,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 2174 chars
[AssistantService][Debug] Validation: FAILED (errors=3, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562147783,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-e","res":{"statusCode":200},"responseTime":8370.666499987245,"msg":"request completed"}
{"level":30,"time":1766562149294,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-f","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
{"level":30,"time":1766562149561,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-f","res":{"statusCode":200},"responseTime":267.57790000736713,"msg":"request completed"}
{"level":30,"time":1766562151077,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-g","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'conversation',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 1394,
  temperature: 0.7,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 611 chars
[AssistantService][Debug] No structured JSON payload found in response.
[AssistantService][Debug] Mode: conversation, Mascot: default, Preview: NO
{"level":30,"time":1766562153613,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-g","res":{"statusCode":200},"responseTime":2536.0574000030756,"msg":"request completed"}
{"level":30,"time":1766562155129,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-h","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT 1
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 2473,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 1244 chars
[AssistantService][Debug] Validation: FAILED (errors=2, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562165015,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-h","res":{"statusCode":200},"responseTime":9886.302700012922,"msg":"request completed"}
{"level":30,"time":1766562166522,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-i","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 2482,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 2246 chars
[AssistantService][Debug] Validation: FAILED (errors=2, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562174218,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-i","res":{"statusCode":200},"responseTime":7696.537900000811,"msg":"request completed"}
{"level":30,"time":1766562175726,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-j","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT 1
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 2482,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 1899 chars
[AssistantService][Debug] Validation: FAILED (errors=2, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562181939,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-j","res":{"statusCode":200},"responseTime":6212.775900006294,"msg":"request completed"}
{"level":30,"time":1766562183441,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-k","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 2481,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 432 chars
[AssistantService][Debug] Validation: PASSED (errors=0, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562185694,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-k","res":{"statusCode":200},"responseTime":2252.777899995446,"msg":"request completed"}
{"level":30,"time":1766562187203,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-l","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'conversation',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 1392,
  temperature: 0.7,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 520 chars
[AssistantService][Debug] No structured JSON payload found in response.
[AssistantService][Debug] Mode: conversation, Mascot: default, Preview: NO
{"level":30,"time":1766562188950,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-l","res":{"statusCode":200},"responseTime":1747.901399999857,"msg":"request completed"}
{"level":30,"time":1766562190463,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-m","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 2, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 4,
  contextChars: 2471,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 2247 chars
[AssistantService][Debug] Validation: FAILED (errors=2, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562196641,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-m","res":{"statusCode":200},"responseTime":6178.005600005388,"msg":"request completed"}
{"level":30,"time":1766562198158,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-n","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT 1
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
{"level":30,"time":1766562198595,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-n","res":{"statusCode":200},"responseTime":437.1385999917984,"msg":"request completed"}
{"level":30,"time":1766562200111,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-o","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56517},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 2, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 4,
  contextChars: 2471,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 1714 chars
[AssistantService][Debug] Validation: FAILED (errors=1, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: default, Preview: YES
{"level":30,"time":1766562205626,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-o","res":{"statusCode":200},"responseTime":5515.598299995065,"msg":"request completed"}
{"level":30,"time":1766562211027,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-p","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56685},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
{"level":30,"time":1766562211288,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-p","res":{"statusCode":200},"responseTime":260.5034999996424,"msg":"request completed"}
{"level":30,"time":1766562220418,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-q","req":{"method":"GET","url":"/api/user/me","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56767},"msg":"incoming request"}
prisma:query SELECT 1
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
{"level":30,"time":1766562220422,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-q","res":{"statusCode":200},"responseTime":3.2233999967575073,"msg":"request completed"}
{"level":30,"time":1766562220426,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-r","req":{"method":"GET","url":"/api/tasks","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56770},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE "public"."Task"."userId" = $1 ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC, "public"."Task"."createdAt" DESC OFFSET $2
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3,$4,$5,$6) OFFSET $7
prisma:query SELECT "public"."Category"."id", "public"."Category"."userId", "public"."Category"."name", "public"."Category"."color", "public"."Category"."isDefault", "public"."Category"."order", "public"."Category"."createdAt", "public"."Category"."updatedAt" FROM "public"."Category" WHERE "public"."Category"."id" IN ($1) OFFSET $2
{"level":30,"time":1766562220432,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-r","res":{"statusCode":200},"responseTime":4.966699987649918,"msg":"request completed"}
{"level":30,"time":1766562220432,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-s","req":{"method":"GET","url":"/api/assistant/history","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56767},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
{"level":30,"time":1766562220434,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-s","res":{"statusCode":200},"responseTime":1.407600000500679,"msg":"request completed"}
{"level":30,"time":1766562243113,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-t","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56807},"msg":"incoming request"}
prisma:query SELECT 1
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'conversation',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 1542,
  temperature: 0.7,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 835 chars
[AssistantService][Debug] No structured JSON payload found in response.
[AssistantService][Debug] Mode: conversation, Mascot: guiding, Preview: NO
{"level":30,"time":1766562246870,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-t","res":{"statusCode":200},"responseTime":3756.497199997306,"msg":"request completed"}
{"level":30,"time":1766562246875,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-u","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56813},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
{"level":30,"time":1766562247104,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-u","res":{"statusCode":200},"responseTime":229.03530000150204,"msg":"request completed"}
{"level":30,"time":1766562247105,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-v","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":56807},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'conversation',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 1406,
  temperature: 0.7,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 378 chars
[AssistantService][Debug] No structured JSON payload found in response.
[AssistantService][Debug] Mode: conversation, Mascot: default, Preview: NO
{"level":30,"time":1766562248874,"pid":2028,"hostname":"DESKTOP-D5OSSQL","reqId":"req-v","res":{"statusCode":200},"responseTime":1768.163499996066,"msg":"request completed"}
1:47:40 AM [tsx] change in ./src\services\assistantService.ts Restarting...
c{"level":30,"time":1766562462486,"pid":15244,"hostname":"DESKTOP-D5OSSQL","msg":"Server listening at http://127.0.0.1:3001"}
{"level":30,"time":1766562462486,"pid":15244,"hostname":"DESKTOP-D5OSSQL","msg":"Server listening at http://10.5.0.2:3001"}
{"level":30,"time":1766562462486,"pid":15244,"hostname":"DESKTOP-D5OSSQL","msg":"Server listening at http://172.20.16.1:3001"}
{"level":30,"time":1766562462486,"pid":15244,"hostname":"DESKTOP-D5OSSQL","msg":"Server listening at http://192.168.1.9:3001"}
{"level":30,"time":1766562462486,"pid":15244,"hostname":"DESKTOP-D5OSSQL","msg":"TimeFlow backend listening at http://127.0.0.1:3001"}
1:47:45 AM [tsx] change in ./src\services\assistantService.ts Restarting...
c{"level":50,"time":1766562467813,"pid":20188,"hostname":"DESKTOP-D5OSSQL","err":{"type":"Error","message":"listen EADDRINUSE: address already in use 0.0.0.0:3001","stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3001\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","code":"EADDRINUSE","errno":-4091,"syscall":"listen","address":"0.0.0.0","port":3001},"msg":"listen EADDRINUSE: address already in use 0.0.0.0:3001"}
1:47:54 AM [tsx] change in ./src\services\assistantService.ts Rerunning...
c{"level":30,"time":1766562475817,"pid":42540,"hostname":"DESKTOP-D5OSSQL","msg":"Server listening at http://127.0.0.1:3001"}
{"level":30,"time":1766562475817,"pid":42540,"hostname":"DESKTOP-D5OSSQL","msg":"Server listening at http://10.5.0.2:3001"}
{"level":30,"time":1766562475817,"pid":42540,"hostname":"DESKTOP-D5OSSQL","msg":"Server listening at http://172.20.16.1:3001"}
{"level":30,"time":1766562475817,"pid":42540,"hostname":"DESKTOP-D5OSSQL","msg":"Server listening at http://192.168.1.9:3001"}
{"level":30,"time":1766562475817,"pid":42540,"hostname":"DESKTOP-D5OSSQL","msg":"TimeFlow backend listening at http://127.0.0.1:3001"}
{"level":30,"time":1766562496741,"pid":42540,"hostname":"DESKTOP-D5OSSQL","reqId":"req-1","req":{"method":"POST","url":"/api/assistant/chat","host":"localhost:3001","remoteAddress":"127.0.0.1","remotePort":57088},"msg":"incoming request"}
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Task"."id" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3) AS "sub"
[AssistantService][Debug] unscheduledTasksCount=3
[AssistantService][Debug] detectMode input: { hasUnscheduledTasks: true }
[AssistantService][Debug] conversationHistory: { count: 0, fallback: false }
[AssistantService][Debug] Reschedule intent detected; switching to scheduling mode.
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) ORDER BY "public"."Task"."dueDate" ASC, "public"."Task"."priority" ASC OFFSET $3
prisma:query SELECT "public"."Task"."id", "public"."Task"."userId", "public"."Task"."title", "public"."Task"."description", "public"."Task"."durationMinutes", "public"."Task"."priority", "public"."Task"."status", "public"."Task"."categoryId", "public"."Task"."dueDate", "public"."Task"."createdAt", "public"."Task"."updatedAt" FROM "public"."Task" WHERE ("public"."Task"."userId" = $1 AND "public"."Task"."status" = $2) OFFSET $3
prisma:query SELECT "public"."ScheduledTask"."id", "public"."ScheduledTask"."taskId", "public"."ScheduledTask"."provider", "public"."ScheduledTask"."calendarId", "public"."ScheduledTask"."eventId", "public"."ScheduledTask"."startDateTime", "public"."ScheduledTask"."endDateTime", "public"."ScheduledTask"."overflowedDeadline", "public"."ScheduledTask"."lastSyncedAt" FROM "public"."ScheduledTask" WHERE "public"."ScheduledTask"."taskId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Habit"."id", "public"."Habit"."userId", "public"."Habit"."title", "public"."Habit"."description", "public"."Habit"."frequency", "public"."Habit"."daysOfWeek", "public"."Habit"."preferredTimeOfDay", "public"."Habit"."durationMinutes", "public"."Habit"."isActive", "public"."Habit"."createdAt", "public"."Habit"."updatedAt" FROM "public"."Habit" WHERE ("public"."Habit"."userId" = $1 AND "public"."Habit"."isActive" = $2) ORDER BY "public"."Habit"."createdAt" ASC OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."email", "public"."User"."createdAt", "public"."User"."updatedAt", "public"."User"."googleId", "public"."User"."googleRefreshToken", "public"."User"."googleAccessToken", "public"."User"."googleAccessTokenExpiry", "public"."User"."timeZone", "public"."User"."wakeTime", "public"."User"."sleepTime", "public"."User"."dailySchedule", "public"."User"."dailyScheduleConstraints", "public"."User"."defaultTaskDurationMinutes", "public"."User"."defaultCalendarId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[AssistantService][Debug] LLM request: {
  mode: 'scheduling',
  provider: 'openai',
  endpoint: 'https://api.openai.com/v1/chat/completions',
  model: 'gpt-4o',
  messages: 2,
  contextChars: 2851,
  temperature: 0.2,
  maxTokens: 4000
}
[AssistantService][Debug] LLM response length: 870 chars
[AssistantService][Debug] Validation: PASSED (errors=0, warnings=0)
[AssistantService][Debug] Mode: scheduling, Mascot: celebrating, Preview: YES
{"level":30,"time":1766562500257,"pid":42540,"hostname":"DESKTOP-D5OSSQL","reqId":"req-1","res":{"statusCode":200},"responseTime":3515.343800008297,"msg":"request completed"}
1:51:55 AM [tsx] change in ./src\utils\availability.ts Restarting...
c{"level":50,"time":1766562717437,"pid":42708,"hostname":"DESKTOP-D5OSSQL","err":{"type":"Error","message":"listen EADDRINUSE: address already in use 0.0.0.0:3001","stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3001\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","code":"EADDRINUSE","errno":-4091,"syscall":"listen","address":"0.0.0.0","port":3001},"msg":"listen EADDRINUSE: address already in use 0.0.0.0:3001"}
1:52:03 AM [tsx] change in ./src\utils\availability.ts Rerunning...
c{"level":50,"time":1766562725403,"pid":7136,"hostname":"DESKTOP-D5OSSQL","err":{"type":"Error","message":"listen EADDRINUSE: address already in use 0.0.0.0:3001","stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3001\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","code":"EADDRINUSE","errno":-4091,"syscall":"listen","address":"0.0.0.0","port":3001},"msg":"listen EADDRINUSE: address already in use 0.0.0.0:3001"}
